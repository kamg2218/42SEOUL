## Kubernetes

### 쿠버네티스란?
  
    컨테이너화된 워크로드와 서비스를 관리하기 위한 이식성이 있는 확장가능한 오픈소스 플랫폼이다.
  
    명칭은 키잡이나 파일럿을 뜻하는 그리스어에서 유래했다.
  
    2014년 구글이 쿠버네티스 프로젝트를 오픈소스화했다.
  
   <img src="./docker.png" height="320px" width="480px">
   
   * reference : https://kubernetes.io/ko/docs/concepts/overview/what-is-kubernetes/ 
   
    초기에는 애플리케이션을 물리 서버에서 실행했었고, 리소스의 한계를 정의할 방법이 없었기에 리소스 할당의 문제가 발생했다.
  
    이후, 가상화가 도입되었고, 단일 물리 서버의 CPU에서 여러 가상 시스템을 실행할 수 있었다.
    
    가상화를 사용하면 VM 간에 애플리케이션을 격리하고 애플리케이션의 정보를 다른 애플리케이션에서 자유롭게 접근할 수 없어 보안성을 제공한다.
    
    컨테이너는 가상화와 유사하지만, 격리 속성을 완화하여 애플리케이션 간에 운영체제를 공유한다.
    
    컨테이너가 다운되면 다른 컨테이너를 다시 시작해야하고,
    
    쿠버네티스는 분산 시스템을 탄력적으로 실행하기 위한 프레임 워크를 제공한다.
    
    애플리케이션의 확장과 장애 조치를 처리하고, 배포 패턴 등을 제공한다.
    
    서비스 디스커버리와 로드 밸런싱, 스토리지 오케스트레이션, 자동화된 롤아웃과 롤백, 자동화된 빈 패킹, 자동화된 복구, 시크릿과 구성 관리의 역할을 한다.
    
    쿠버네티스는 하드웨어 수준보다는 컨테이너 수준에서 운영되기 때문에,
    
    PaaS가 일반적으로 제공하는 배포, 스케일링, 로드 밸런싱과 같은 기능을 제공하고, 사용자가 로깅, 모니터링 및 알림 솔루션을 통합할 수 있다.
    
### kubernetes cluster

    쿠버네티스는 서로 연결되어서 단일 유닛처럼 동작하는 고가용성의 컴퓨터 클러스터를 상호조정한다.
    
    애플리케이션을 개별 호스트에 결합되지 않도록 컨테이너화해야한다.
    
    컨테이너화된 애플리케이션은 호스트에 매우 깊이 통합된 패키지로써, 특정 머신에 직접 설치되는 예전의 배포모델보다 유연하고 가용성이 높다.
    
    쿠버네티스는 애플리케이션 컨테이너를 클러스터에 분산시키고 스케줄링하는 일을 보다 효율적으로 자동화한다.
    
#### 마스터 - 클러스터를 상호조정한다.

    클러스터 관리를 담당한다.
    
    애플리케이션을 스케줄링하거나, 애플리케이션의 향상성을 유지하거나 애플리케이션을 스케일링하고,
    
    새로운 변경사항을 순서대로 반영하는 일과 같은 클러스터 내의 모든 활동을 조율한다.

#### 노드 / pod - 애플리케이션을 구동하는 작업자이다. 

    노드는 쿠버네티스 클러스터 내의 워커 머신으로써 동작하는 VM, 물리적인 컴퓨터이다.
    
    각 노드는 노드를 관리하고 쿠버네티스 마스터와 통신하는 Kubelet이라는 에이전트를 갖는다.
    
    운영 트래픽을 처리하는 쿠버네티스 클러스터는 최소 세 대의 노드를 가져야한다.
    
    노드는 마스터가 제공하는 쿠버네티스 API를 통해서 마스터와 통신한다.

### minikube

    minikube는 쿠버네티스를 로컬환경에서 쉽게 실행하는 도구이다.
    
    가상머신이나 노트북에서 단일 노드 쿠버네티스 클러스터를 실행한다.
    
   * kubectl : 쿠버네티스 커맨드 라인도구이다. 클러스터와 상호작용할 수 있다.
    
    brew install kubectl
    
    brew install minikube
    
    minikube start : 시작하기
    
    minikube status : 클러스터 상태 확인
    
    minikube stop : 클러스터 중지
    
    minikube delete : 클러스터 삭제
    
    kubectl create deployment [name] --image=[image name] : 이미지를 이용하여 쿠버네티스 디플로이먼트를 만든다.
    
    kubectl expose deployment [name] --type=NodePort --port=8080 : 8080번 포트로 노드를 만들어 연결한다.
    
    kubectl get pod : 파드가 실행 중인지 확인
    
    kubectl apply -f wordpress-k8s.yml : yml 파일 적용하기

    minikube service [name] --url : 노출된 서비스의 URL을 얻는다.
    
    kubectl delete services [name] : 서비스 삭제
    
    kubectl delete deployment [name] : 디플로이먼트 삭제
    
    minikube stop : 클러스터 중지
    
    minikube delete : 클러스터 삭제

   * reference : https://kubernetes.io/ko/docs/setup/learning-environment/minikube/
